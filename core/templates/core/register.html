{% extends 'base.html' %}
{% load static %}

{% block login_content %}
<div
    style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, var(--kore-navy-900) 0%, #0f172a 100%); padding: 1rem; z-index: 9999; overflow-y: auto;">
    <div style="max-width: 440px; width: 100%; margin-top: auto; margin-bottom: auto;">
        <!-- Brand Header -->
        <div style="text-align: center; margin-bottom: 2rem;">
            <img src="{% static 'images/logo_no background.png' %}" alt="KoreBase"
                style="height: 60px; margin-bottom: 1rem; object-fit: contain;">
            <h2 style="color: white; font-weight: 300; font-size: 1.75rem; margin: 0;">Registro</h2>
            <p style="color: rgba(255,255,255,0.6); font-size: 0.95rem;">Únete a KoreBase ERP</p>
        </div>

        <div class="kore-card"
            style="background: white; padding: 2.5rem; border-radius: 16px; box-shadow: 0 25px 50px rgba(0,0,0,0.5);">
            <form method="post">
                {% csrf_token %}

                {% if messages %}
                {% for message in messages %}
                <div
                    style="padding: 0.75rem; margin-bottom: 1rem; border-radius: 6px; font-size: 0.9rem; 
                            {% if message.tags == 'error' %}background: #fee2e2; color: #991b1b;{% else %}background: #dcfce7; color: #166534;{% endif %}">
                    {{ message }}
                </div>
                {% endfor %}
                {% endif %}

                {% for field in form %}
                <div style="margin-bottom: 1.25rem;">
                    <label
                        style="display: block; font-weight: 600; font-size: 0.9rem; margin-bottom: 0.5rem; color: var(--kore-navy-900);">
                        {{ field.label }}
                    </label>
                    <div class="form-field-wrapper">
                        {{ field }}
                    </div>
                    {% if field.help_text %}
                    <small
                        style="color: #6b7280; font-size: 0.75rem; display: block; margin-top: 0.25rem; line-height: 1.3;">{{
                        field.help_text|safe }}</small>
                    {% endif %}
                    {% for error in field.errors %}
                    <div style="color: #dc2626; font-size: 0.8rem; margin-top: 0.25rem;">{{ error }}</div>
                    {% endfor %}
                </div>
                {% endfor %}

                <button type="submit" class="btn btn-primary"
                    style="width: 100%; height: 3rem; font-weight: 600; margin-top: 0.5rem;">
                    Crear Cuenta
                </button>
            </form>

            <div
                style="text-align: center; margin-top: 1.5rem; padding-top: 1.5rem; border-top: 1px solid var(--kore-gray-100);">
                <p style="color: var(--kore-gray-600); margin: 0; font-size: 0.9rem;">
                    ¿Ya tienes cuenta?
                    <a href="{% url 'core:login' %}"
                        style="color: var(--kore-teal-600); font-weight: 700; text-decoration: none;">Iniciar Sesión</a>
                </p>
            </div>
        </div>
    </div>
</div>

<style>
    /* Estilos inyectados solo para esta página */
    .form-field-wrapper input {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--kore-gray-200);
        border-radius: 8px;
        box-sizing: border-box;
        font-size: 0.95rem;
        transition: border-color 0.2s;
    }

    .form-field-wrapper input:focus {
        border-color: var(--kore-teal-500);
        outline: none;
        box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
    }

    small ul {
        padding-left: 1.25rem;
        margin: 0.5rem 0;
        font-size: 0.75rem;
        color: #6b7280;
        list-style-type: disc;
    }

    small li {
        margin-bottom: 0.25rem;
    }

    .helptext {
        display: none;
    }

    /* Ocultar helptext default de Django si interfiere, pero lo renderizamos manualmente */
</style>
{% endblock %}