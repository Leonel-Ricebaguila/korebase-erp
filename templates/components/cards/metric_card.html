{# 
    Componente: Tarjeta de Métrica
    Uso: Mostrar métricas y KPIs en el dashboard
    
    Parámetros:
    - label: str (requerido) - Etiqueta de la métrica
    - value: str|int (requerido) - Valor a mostrar
    - icon: str (opcional) - Clase de Font Awesome (ej: "fa-users")
    - trend: str (opcional) - 'positive', 'negative', 'neutral'
    - trend_text: str (opcional) - Texto descriptivo del trend
    - color: str (opcional) - 'primary', 'success', 'warning', 'danger', 'info'
    - link: str (opcional) - URL para hacer la tarjeta clickeable
    
    Ejemplo de uso:
    {% include 'components/cards/metric_card.html' with 
        label="Usuarios Activos"
        value=total_users
        icon="fa-users"
        trend="positive"
        trend_text="+12% este mes"
        color="primary"
    %}
#}

{% load static %}

<div class="metric-card {% if color %}metric-card--{{ color }}{% endif %} {% if link %}metric-card--clickable{% endif %}"
     {% if link %}onclick="window.location.href='{{ link }}'"{% endif %}>
    
    <div class="metric-card__header">
        <span class="metric-card__label">{{ label }}</span>
        {% if icon %}
        <span class="metric-card__icon">
            <i class="fas {{ icon }}"></i>
        </span>
        {% endif %}
    </div>
    
    <div class="metric-card__value">{{ value|default:"0" }}</div>
    
    {% if trend or trend_text %}
    <div class="metric-card__trend metric-card__trend--{{ trend|default:'neutral' }}">
        {% if trend == 'positive' %}
            <i class="fas fa-arrow-up"></i>
        {% elif trend == 'negative' %}
            <i class="fas fa-arrow-down"></i>
        {% else %}
            <i class="fas fa-minus"></i>
        {% endif %}
        <span>{{ trend_text|default:"Sin cambios" }}</span>
    </div>
    {% endif %}
</div>

<style>
.metric-card {
    background: var(--color-white);
    border-radius: var(--border-radius-lg);
    padding: var(--spacing-6);
    box-shadow: var(--shadow-sm);
    transition: var(--transition-all);
    border-left: 4px solid var(--color-gray-200);
}

.metric-card--clickable {
    cursor: pointer;
}

.metric-card--clickable:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.metric-card--primary {
    border-left-color: var(--color-primary);
}

.metric-card--success {
    border-left-color: var(--color-success);
}

.metric-card--warning {
    border-left-color: var(--color-warning);
}

.metric-card--danger {
    border-left-color: var(--color-danger);
}

.metric-card--info {
    border-left-color: var(--color-info);
}

.metric-card__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--spacing-3);
}

.metric-card__label {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
    color: var(--color-gray-600);
    text-transform: uppercase;
    letter-spacing: 0.05em;
}

.metric-card__icon {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--border-radius-lg);
    background: var(--color-gray-100);
    color: var(--color-gray-600);
    font-size: var(--font-size-lg);
}

.metric-card--primary .metric-card__icon {
    background: var(--color-primary-50);
    color: var(--color-primary);
}

.metric-card--success .metric-card__icon {
    background: var(--color-success-50);
    color: var(--color-success);
}

.metric-card--warning .metric-card__icon {
    background: var(--color-warning-50);
    color: var(--color-warning);
}

.metric-card--danger .metric-card__icon {
    background: var(--color-danger-50);
    color: var(--color-danger);
}

.metric-card--info .metric-card__icon {
    background: var(--color-info-50);
    color: var(--color-info);
}

.metric-card__value {
    font-size: var(--font-size-3xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-gray-900);
    margin-bottom: var(--spacing-2);
}

.metric-card__trend {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
}

.metric-card__trend--positive {
    color: var(--color-success);
}

.metric-card__trend--negative {
    color: var(--color-danger);
}

.metric-card__trend--neutral {
    color: var(--color-gray-600);
}

.metric-card__trend i {
    font-size: var(--font-size-xs);
}
</style>
